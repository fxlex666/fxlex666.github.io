var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},__extends=function(e,t){function i(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},__assign=Object.assign||function(e){for(var t,i=1,n=arguments.length;n>i;i++){t=arguments[i];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},__rest=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]]);return i},__decorate=function(e,t,i,n){var r,a=arguments.length,o=3>a?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var h=e.length-1;h>=0;h--)(r=e[h])&&(o=(3>a?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},__param=function(e,t){return function(i,n){t(i,n,e)}},__metadata=function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},__awaiter=function(e,t,i,n){function r(e){return e instanceof i?e:new i(function(t){t(e)})}return new(i||(i=Promise))(function(i,a){function o(e){try{s(n.next(e))}catch(t){a(t)}}function h(e){try{s(n["throw"](e))}catch(t){a(t)}}function s(e){e.done?i(e.value):r(e.value).then(o,h)}s((n=n.apply(e,t||[])).next())})},__generator=function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,a&&(o=2&i[0]?a["return"]:i[0]?a["throw"]||((o=a["return"])&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,a=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(n){i=[6,n],a=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,a,o,h,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return h={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h},__exportStar=function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||__createBinding(t,e,i)},__createBinding=Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]},__values=function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,a=i.call(e),o=[];try{for(;(void 0===t||t-->0)&&!(n=a.next()).done;)o.push(n.value)}catch(h){r={error:h}}finally{try{n&&!n.done&&(i=a["return"])&&i.call(a)}finally{if(r)throw r.error}}return o},__spread=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e},__spreadArrays=function(){for(var e=0,t=0,i=arguments.length;i>t;t++)e+=arguments[t].length;for(var n=Array(e),r=0,t=0;i>t;t++)for(var a=arguments[t],o=0,h=a.length;h>o;o++,r++)n[r]=a[o];return n},__await=function(e){return this instanceof __await?(this.v=e,this):new __await(e)},__asyncGenerator=function(e,t,i){function n(e){d[e]&&(c[e]=function(t){return new Promise(function(i,n){u.push([e,t,i,n])>1||r(e,t)})})}function r(e,t){try{a(d[e](t))}catch(i){s(u[0][3],i)}}function a(e){e.value instanceof __await?Promise.resolve(e.value.v).then(o,h):s(u[0][2],e)}function o(e){r("next",e)}function h(e){r("throw",e)}function s(e,t){e(t),u.shift(),u.length&&r(u[0][0],u[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,d=i.apply(e,t||[]),u=[];return c={},n("next"),n("throw"),n("return"),c[Symbol.asyncIterator]=function(){return this},c},__asyncDelegator=function(e){function t(t,r){i[t]=e[t]?function(i){return(n=!n)?{value:__await(e[t](i)),done:"return"===t}:r?r(i):i}:r}var i,n;return i={},t("next"),t("throw",function(e){throw e}),t("return"),i[Symbol.iterator]=function(){return this},i},__asyncValues=function(e){function t(t){n[t]=e[t]&&function(n){return new Promise(function(r,a){n=e[t](n),i(r,a,n.done,n.value)})}}function i(e,t,i,n){Promise.resolve(n).then(function(t){e({value:t,done:i})},t)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)},__makeTemplateObject=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__setModuleDefault=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t},__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return __setModuleDefault(t,e),t},__importDefault=function(e){return e&&e.__esModule?e:{"default":e}},__classPrivateFieldGet=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},__classPrivateFieldSet=function(e,t,i){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,i),i},__reflect=function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i};!function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var r in e)t.d(n,r,function(t){return e[t]}.bind(null,r));return n},t.n=function(e){var i=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,i){i(1),i(2),i(0),i(3),i(4),i(5),i(6),i(7),i(8);var n=function(e){function t(){var t=e.call(this)||this;return t.isduanpin=!1,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){console.log(this.stage),Game.config.stageW=this.stage.stageWidth,Game.config.stageH=this.stage.stageHeight,egret.lifecycle.addLifecycleListener(function(e){e.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadfirst()];case 1:return i.sent(),[4,this.loadResource()];case 2:return i.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 3:return e=i.sent(),[4,platform.login()];case 4:return i.sent(),[4,WxShare.setDefaultShare()];case 5:return i.sent(),[4,platform.getUserInfo()];case 6:return t=i.sent(),console.log(t),[2]}})})},t.prototype.loadfirst=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return e.sent(),[4,RES.loadGroup("loadfirst",0)];case 2:return e.sent(),console.log("加载完成加载页"),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadGroup("preload",0,e)];case 1:return i.sent(),this.stage.removeChild(e),[3,3];case 2:return t=i.sent(),console.error(t),[3,3];case 3:return[2]}})})},t.prototype.createGameScene=function(){window.innerWidth/window.innerHeight<2.1&&(this.isduanpin=!0);var e=Game.createBitmapByName("indexbg_png");this.stage.addChild(e);var t=Game.createBitmapByName("index_piao_png");this.isduanpin,t.anchorOffsetX=t.width;Game.autoX(0);t.x=Game.config.stageW+130,t.y=Game.autoY(-50),this.stage.addChild(t),console.log(Game.config.stageW);var i=Game.createBitmapByName("index_right_png");i.x=Game.config.stageW-i.width,i.anchorOffsetY=i.height,i.y=Game.changeY(750),this.stage.addChild(i);var n=Game.createBitmapByName("index_icon_png");this.isduanpin&&(n.width=.85*n.width,n.height=Game.autoHeight(n)),n.x=40,n.y=Game.autoY(8),this.stage.addChild(n);var r=Game.createBitmapByName("index_left_png");r.x=0,r.anchorOffsetY=r.height,r.y=Game.changeY(750),this.stage.addChild(r);var a=Game.createBitmapByName("index_btn1_png");this.stage.addChild(a),a.x=400,a.y=Game.changeY(200),a.touchEnabled=!0,a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.drawPage,this);var o=Game.createBitmapByName("index_btn2_png");this.stage.addChild(o),o.x=850,o.y=Game.changeY(100),o.touchEnabled=!0,o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Coloring,this)},t.prototype.Coloring=function(){this.choosepage=new Game.choosepage,this.stage.addChild(this.choosepage),this.choosepage.addEventListener(choosefn.DATE,this.choosething,this)},t.prototype.choosething=function(e){console.log(e),this.colorpage=new Game.colorpage,this.stage.removeChild(this.choosepage),this.stage.addChild(this.colorpage),this.colorpage.startGame(e.data,e.num),this.colorpage.addEventListener(gohomefn.DATE,this.colorbackIndex,this)},t.prototype.drawPage=function(){this.drawpage=new Game.drawpage,this.stage.addChild(this.drawpage),this.drawpage.addEventListener(gohomefn.DATE,this.backIndex,this)},t.prototype.backIndex=function(){this.stage.removeChild(this.drawpage)},t.prototype.colorbackIndex=function(){this.stage.removeChild(this.colorpage)},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t.prototype.startAnimation=function(e){var t=this,i=new egret.HtmlTextParser,n=e.map(function(e){return i.parse(e)}),r=this.textfield,a=-1,o=function(){a++,a>=n.length&&(a=0);var e=n[a];r.textFlow=e;var i=egret.Tween.get(r);i.to({alpha:1},200),i.wait(2e3),i.to({alpha:0},200),i.call(o,t)};o()},t}(egret.DisplayObjectContainer);window.Main=n,__reflect(n.prototype,"Main",[])},function(e,t){var i,i=window.Game;!function(e){function t(){var e=["我爱画画","我是天才小画家","跟我一起来画画吧","你画画有我好看？"],t=Math.floor(4*Math.random());return console.log(e[t]),e[t]}function i(){return""}function n(e){var t=e.$bitmapHeight*e.width/e.$bitmapWidth;return t}function r(e){var t=e.$bitmapWidth*e.height/e.$bitmapHeight;return t}function a(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t}function o(t,i,n){var r=e.createBitmapByName(t);return r.anchorOffsetX=r.width/2,r.anchorOffsetY=r.height/2,r.x=i,r.y=n,r}function h(t,i,n){var r=e.createBitmapByName(t);return r.x=i,r.y=n,r}function s(e,t,i){e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_TAP,t,i)}function c(e){var t=0;return t=1625*e/window.innerWidth*window.innerHeight/750}function d(e){var t=0;return t=window.innerHeight/window.innerWidth>750/1625?e:(750-1625/window.innerWidth*window.innerHeight)/2+e}function u(e){var t=0;return t=window.innerHeight/window.innerWidth<750/1625?e:(1625-750/window.innerHeight*window.innerWidth)/2+e}function l(e){var t=egret.Tween.get(e,{loop:!1});t.to({scaleX:0,scaleY:0},0),t.to({scaleX:1,scaleY:1},500,egret.Ease.backOut)}function g(e,t,i){var n=egret.Tween.get(e,{loop:!1});n.to({scaleX:.5,scaleY:.5,alpha:0},400,egret.Ease.backIn).call(function(){console.log(typeof i),t.removeChild(e),"function"==typeof i&&i&&i()})}function p(t,i,n){n.removeChild(t),e.boxIn(i)}function f(e){var t=egret.Tween.get(e,{loop:!0});t.to({scaleX:1.03,scaleY:1.03},250),t.to({scaleX:.97,scaleY:.97},500),t.to({scaleX:1,scaleY:1},250)}function v(t,i,n){var r=e.addZhedottap();n.addChild(r);var a=egret.Tween.get(t,{loop:!1});a.to({x:-750},500,egret.Ease.sineOut).call(function(e){n.removeChild(t),n.removeChild(r)});var o=egret.Tween.get(i,{loop:!1});o.to({x:750},0),o.to({x:0},500,egret.Ease.sineOut)}function w(t,i,n){var r=e.addZhedottap();n.addChild(r);var a=egret.Tween.get(t,{loop:!1});a.to({x:750},500,egret.Ease.sineIn).call(function(e){n.removeChild(t),n.removeChild(r)});var o=egret.Tween.get(i,{loop:!1});o.to({x:-750},0),o.to({x:0},500,egret.Ease.sineIn)}function m(){var e=new egret.Sprite;return e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x=375,e.y=725,e}function _(){var e=new egret.Shape;return e.graphics.beginFill(0),e.graphics.drawRect(0,0,750,1450),e.graphics.endFill(),e.alpha=0,e.touchEnabled=!0,e}function y(e){var t=new egret.Shape;t.graphics.beginFill(0),t.graphics.drawRect(-375,-725,750,1450),t.graphics.endFill(),t.alpha=0,t.touchEnabled=!0,e.addChild(t)}function b(e){var t="",i=Math.floor(e/60)<10?"0"+String(Math.floor(e/60)):String(Math.floor(e/60)),n=Math.floor(e%60)<10?"0"+String(Math.floor(e%60)):String(Math.floor(e%60)),r=1e3*Number((e-Math.floor(e)).toFixed(3)),a="";return a=10>r?"00"+String(r):100>r?"0"+String(r):String(r),t=i+":"+n+":"+a}function T(t,i){var n=this;return new Promise(function(r,a){var o=e.config.istest?e.config.apiurl+e.config.urlPath+t:e.config.urlPath+t,h=new egret.URLLoader;h.dataFormat=egret.URLLoaderDataFormat.TEXT,h.addEventListener(egret.Event.COMPLETE,function(e){var t=e.target,i=t.data;if(i){var n=JSON.parse(String(i));r(n)}},n);var s=new egret.URLRequest(o),c=new egret.URLRequestHeader("openid","o8snajuSxNHS0Ehxnp25TCKC9puk");e.config.istest&&s.requestHeaders.push(c),s.method=egret.URLRequestMethod.POST,s.data=new egret.URLVariables(i),h.load(s)})}var E=function(){function e(){}return e.apiurl="https://h5test.xingkech5.com/car_racing/",e.urlPath="ajax/",e.stageW=0,e.stageH=0,e.drawList={f_fruit:[{str:"apple",num:3},{str:"boluo",num:3},{str:"caomei",num:4}],f_fish:[],f_shucai:[],f_car:[{str:"shuini",num:7},{str:"xiaofang",num:11},{str:"policeCar",num:8}],f_other:[]},e.istest=!1,e.colorlist=[16777215,16245849,16368957,16231730,15634012,16018213,14366519,16535145,13708875,10472683,3375050,4368816,7224429,4351780,7119913,10533427,8104815,6175517,0,12303532],e}();e.config=E,__reflect(E.prototype,"Game.config",[]);var x=function(){function e(){}return e.hitTest=function(e,t){var i=e.getBounds(),n=t.getBounds();return i.x=e.x,i.y=e.y,n.x=t.x-60,n.y=t.y,i.intersects(n)},e.hitTestporn=function(e,t,i){var n,r=i.getBounds();return n.x=e,n.y=t,r.x=i.x-60,r.y=i.y,n.intersects(r)},e}();e.GameUtil=x,__reflect(x.prototype,"Game.GameUtil",[]),e.getShareTitle=t,e.getShareImg=i,e.autoHeight=n,e.autoWidth=r,e.createBitmapByName=a,e.addChildFastCen=o,e.addChildFast=h,e.touchTap=s,e.changeY=c,e.autoY=d,e.autoX=u,e.boxIn=l,e.boxOut=g,e.boxOutIn=p,e.btnpluse=f,e.pagego=v,e.pageback=w,e.creatTanchuan=m,e.addZhedottap=_,e.addZhe=y,e.timeToString=b,e.urlRequest=T}(i||(i={})),window.Game=i},function(e,t){var i=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){var e=Game.createBitmapByName("indexbg_png");this.addChild(e);var t=Game.createBitmapByName("jindu_bg_png");t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.x=Game.config.stageW/2,t.y=Game.config.stageH/2,this.addChild(t);var i=Game.addChildFastCen("jindu_png",t.x,t.y);this.addChild(i),this.allwidth=i.width,this.jinduzhe=Game.addChildFastCen("jindu_png",t.x,t.y),this.addChild(this.jinduzhe),i.mask=this.jinduzhe,this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=t.y+t.height/2+30,this.textField.width=Game.config.stageW,this.textField.height=Game.config.stageH,this.textField.textAlign="center",this.textField.textColor=6697728},t.prototype.onProgress=function(e,t){var i=Math.round(e/t*100);this.textField.text="Loading..."+i+"%",this.jinduzhe.width=this.allwidth*e/t},t}(egret.Sprite);window.LoadingUI=i,__reflect(i.prototype,"LoadingUI",["RES.PromiseTaskReporter"])},function(e,t){var i=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.showShareMenu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();window.DebugPlatform=i,__reflect(i.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new i)},function(e,t){var i,i=window.Game;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.prevtap=0,e.nowtype="f_fruit",e.list=[{str:"apple",num:3},{str:"boluo",num:3}],e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(i,t),i.prototype.onAddToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.gamebg()},i.prototype.gamebg=function(){var t=e.createBitmapByName("indexbg_png");this.addChild(t);var i=e.createBitmapByName("choose_bg_png");this.addChild(i),i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.x=e.config.stageW/2,i.y=e.config.stageH/2+20,this.drawTap(i),this.drawlist()},i.prototype.drawTap=function(t){this.tapbgList2=new egret.Sprite,this.tapbgList=new egret.Sprite,this.tapList=new egret.Sprite,this.addChild(this.tapbgList2),this.addChild(this.tapbgList),this.addChild(this.tapList),this.setChildIndex(this.tapbgList2,1),this.setChildIndex(this.tapbgList,2);for(var i=["f_fruit","f_fish","f_shucai","f_car","f_other"],n=0;5>n;n++){var r=e.config.stageH/2-t.height/2+5,a=e.config.stageW/2+t.width/2-50-65,o=110*n+r+20,h=90,s=e.createBitmapByName("choose_tapbg2_png");s.anchorOffsetY=s.height/2,s.x=a,s.y=o+s.height/2,this.tapbgList2.addChild(s),s.id=n;var c=e.createBitmapByName("choose_tapbg_png");c.anchorOffsetY=c.height/2,c.x=a,c.y=o+c.height/2,this.tapbgList.addChild(c),c.id=n,c.type=i[n],c.touchEnabled=!0,c.addEventListener(egret.TouchEvent.TOUCH_TAP,this.choosetap,this);var d=e.createBitmapByName(i[n]+"_png");d.anchorOffsetX=d.width/2,d.anchorOffsetY=d.height/2,this.tapList.addChild(d),d.x=a+15+h/2+50,d.y=o+h/2,d.scaleX=.7,d.scaleY=.7,0==n&&(c.scaleX=s.scaleX=1.15,c.scaleY=s.scaleY=1.05,c.alpha=0,d.x=d.x+10)}},i.prototype.choosetap=function(e){var t=e.currentTarget,i=t.id,n=this.tapbgList.$children,r=this.tapbgList2.$children;if(i!=this.prevtap){if(wx.vibrateShort({type:"medium"}),this.prevtap<10){var a=n[this.prevtap],o=egret.Tween.get(a,{loop:!1});o.to({scaleX:1,scaleY:1,alpha:1},300,egret.Ease.sineIn);var h=r[this.prevtap],s=egret.Tween.get(h,{loop:!1});s.to({scaleX:1,scaleY:1},300,egret.Ease.sineIn);var c=this.tapList.$children[this.prevtap],d=egret.Tween.get(c,{loop:!1});d.to({x:c.x-13},300,egret.Ease.sineOut)}var u=egret.Tween.get(t,{loop:!1});u.to({scaleX:1.15,scaleY:1.05,alpha:0},300,egret.Ease.sineOut);var l=egret.Tween.get(r[i],{loop:!1});l.to({scaleX:1.15,scaleY:1.05},300,egret.Ease.sineOut);var c=this.tapList.$children[i],g=egret.Tween.get(c,{loop:!1});g.to({x:c.x+13},300,egret.Ease.sineOut),this.prevtap=i,this.nowtype=t.type,this.drawlists()}},i.prototype.drawlist=function(){this.content=new egret.Sprite;var t=new egret.ScrollView;t.setContent(this.content),t.width=1135,t.height=530,t.x=(e.config.stageW-t.width)/2,t.y=(e.config.stageH-t.height)/2-22,t.bounces=!1,t.verticalScrollPolicy="on",this.myscrollView=t,this.addChild(this.myscrollView),this.drawlists()},i.prototype.drawlists=function(){this.content.removeChildren();for(var t=e.config.drawList[this.nowtype],i=0;i<t.length;i++){var n=e.createBitmapByName("chooseli_bg_png");n.y=274*Math.floor(i/4)+10,n.x=i%4*282,this.content.addChild(n),n.touchEnabled=!0,n.str=t[i].str,n.num=t[i].num,n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.choosething,this);var r=e.createBitmapByName(t[i].str+"_line1_png");this.content.addChild(r),r.width>r.height?(r.width=185,r.height=e.autoHeight(r)):(r.height=185,r.width=e.autoWidth(r)),r.anchorOffsetX=r.width/2,r.anchorOffsetY=r.height/2,r.x=n.x+n.width/2,r.y=n.y+n.height/2+10}},i.prototype.choosething=function(e){var t=new choosefn(choosefn.DATE);t.data=e.currentTarget.str,t.num=e.currentTarget.num,this.dispatchEvent(t)},i}(egret.DisplayObjectContainer);e.choosepage=t,__reflect(t.prototype,"Game.choosepage",[])}(i||(i={})),window.Game=i},function(e,t){var i,i=window.Game;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.color=16711680,e.pensize=31,e.safeAreaLeft=0,e.isIos=!1,e.drawthings=[],e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(i,t),i.prototype.onAddToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.gamebg()},i.prototype.gamebg=function(){var t=e.createBitmapByName("indexbg_png");t.touchEnabled=!0,this.addChild(t),this.saveGroup=new egret.Sprite,this.addChild(this.saveGroup),this.drawboxfn()},i.prototype.startGame=function(e,t){this.drawInit(e,t)},i.prototype.drawboxfn=function(){if(this.drawbox=new egret.Shape,this.drawbox.graphics.beginFill(16777215),this.drawbox.graphics.drawRect(100+this.safeAreaLeft,50,1360,e.changeY(650)),this.drawbox.graphics.endFill(),this.saveGroup.addChild(this.drawbox),this.safeAreaLeft>0){var t=e.createBitmapByName("liuhai_png");t.anchorOffsetX=t.width,t.x=this.safeAreaLeft,t.y=0,this.saveGroup.addChild(t)}var i=e.createBitmapByName("hua_zhe_png");i.height=e.changeY(i.height),this.saveGroup.addChild(i),i.x=i.x+this.safeAreaLeft,this.penListfn(),this.sepan=new egret.Shape,this.sepan.graphics.lineStyle(4,0),this.sepan.graphics.beginFill(0),this.sepan.graphics.drawRoundRect(0,0,66,66,66),this.sepan.graphics.endFill(),this.sepan.x=e.config.stageW/2-33+this.safeAreaLeft,this.sepan.y=0,this.addChild(this.sepan);var n=30,r=e.createBitmapByName("save_btn_png");this.addChild(r),r.width=.54*r.width,r.height=e.autoHeight(r),r.x=e.config.stageW-r.width-n,r.y=e.changeY(90),r.touchEnabled=!0,r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.savePhoto,this);var a=e.createBitmapByName("delete_btn_png");this.addChild(a),a.width=.54*a.width,a.height=e.autoHeight(a),a.x=r.x,a.y=r.y+r.height+20,a.touchEnabled=!0,a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.cleanAll,this);var o=e.createBitmapByName("pen_btn_png");this.addChild(o),o.width=.54*o.width,o.height=e.autoHeight(o),o.x=e.config.stageW-o.width-25-n,o.y=a.y+a.height+40,o.touchEnabled=!0,o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.bichufn,this),this.bichuGroup=new egret.Sprite,this.addChild(this.bichuGroup),this.bichuGroup.visible=!1;var h=e.createBitmapByName("bichu_png");this.bichuGroup.addChild(h),h.$anchorOffsetX=h.width,h.x=o.x-10,h.y=60,h.touchEnabled=!0,h.addEventListener(egret.TouchEvent.TOUCH_TAP,this.bisizeChoose,this),this.bichuk=e.createBitmapByName("bichuk_png"),this.bichuGroup.addChild(this.bichuk),this.bichuk.anchorOffsetX=this.bichuk.width,this.bichuk.x=h.x-30,this.bichuk.y=294;var s=e.createBitmapByName("home_btn_png");this.addChild(s),s.width=.54*s.width,s.height=e.autoHeight(s),s.x=r.x,s.y=o.y+o.height+40,s.touchEnabled=!0,s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.gohome,this)},i.prototype.savePhoto2=function(){return __awaiter(this,void 0,void 0,function(){var t,i,n,r,a,o,h,s=this;return __generator(this,function(c){for(t=this,i=RES.getRes("kacha_mp3"),n=i.play(0,1),r=this.referline.$children,a=0,o=0;o<r.length;o++)h=r[o],.7==h.alpha&&(h.alpha=1,a=o);return this.setChildIndex(this.saveGroup,100),setTimeout(function(i){return __awaiter(s,void 0,void 0,function(){var i,n,o,h;return __generator(this,function(s){switch(s.label){case 0:return[4,canvas.toTempFilePathSync({x:this.safeAreaLeft*wx.getSystemInfoSync().pixelRatio,width:canvas.width-this.safeAreaLeft*wx.getSystemInfoSync().pixelRatio,destWidth:1625,destHeight:e.changeY(750)})];case 1:return i=s.sent(),console.log(i),r[a].alpha=.7,this.setChildIndex(this.saveGroup,1),n=new egret.RenderTexture,n.drawToTexture(this.saveGroup),o=new egret.Bitmap(n),o.anchorOffsetX=o.width/2,o.anchorOffsetY=o.height/2,o.x=e.config.stageW/2,o.y=e.config.stageH/2,this.addChild(o),h=egret.Tween.get(o,{loop:!1}),h.to({scaleX:.5,scaleY:.5},1e3).call(function(e){wx.saveImageToPhotosAlbum({filePath:i,success:function(e){wx.showToast({title:"成功保存到相册",icon:"success",duration:1500})},complete:function(e){wx.hideLoading(),setTimeout(function(e){var i=egret.Tween.get(o,{loop:!1});i.to({alpha:0},100).call(function(e){t.removeChild(o)})},1400)}})}),[2]}})})},30),[2]})})},i.prototype.imageToPhoto=function(e,t){var i=this;wx.saveImageToPhotosAlbum({filePath:e,success:function(e){setTimeout(function(e){wx.showToast({title:"成功保存到相册",icon:"success",duration:1400})},50)},complete:function(e){wx.hideLoading(),setTimeout(function(e){var n=egret.Tween.get(t,{loop:!1});n.to({alpha:0},100).call(function(e){i.removeChild(t)})},1400)}})},i.prototype.savePhoto=function(){return __awaiter(this,void 0,void 0,function(){var t,i,n,r,a,o,h,s,c=this;return __generator(this,function(d){for(t=this,i=RES.getRes("kacha_mp3"),n=i.play(0,1),wx.showLoading({title:"处理中"}),r=this.referline.$children,a=[],o=0;o<r.length;o++)h=r[o],.7==h.alpha&&(h.alpha=1,a.push(o));return this.setChildIndex(this.saveGroup,100),s=new egret.RenderTexture,s.drawToTexture(this.saveGroup),setTimeout(function(i){return __awaiter(c,void 0,void 0,function(){var i,n,o,h,c;return __generator(this,function(d){switch(d.label){case 0:return i=new egret.Bitmap(s),i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.x=e.config.stageW/2,i.y=e.config.stageH/2,this.addChild(i),n="zidai",o="",[4,canvas.toTempFilePathSync({destWidth:1625,destHeight:e.changeY(750)})];case 1:o=d.sent(),this.setChildIndex(this.saveGroup,1);for(h in a)r[a[h]].alpha=.7;return console.log(o),c=wx.getFileSystemManager(),c.getFileInfo({filePath:o,success:function(e){if(e.size>1e5){console.log("直接保存");var n=egret.Tween.get(i,{loop:!1});n.to({scaleX:.5,scaleY:.5},1e3).call(function(e){t.imageToPhoto(o,i)})}else{console.log("写入文件");var r=s.toDataURL("image/png").replace(/^data:image\/\w+;base64,/,"");c.writeFile({filePath:wx.env.USER_DATA_PATH+"/hello.png",data:r,encoding:"base64",success:function(e){console.log(e),o=wx.env.USER_DATA_PATH+"/hello.png";var n=egret.Tween.get(i,{loop:!1});n.to({scaleX:.5,scaleY:.5},1e3).call(function(e){t.imageToPhoto(o,i)})},fail:function(e){console.error(e)}})}},complete:function(e){console.log(e)}}),[2]}})})},30),[2]})})},i.prototype.bichufn=function(){this.bichuGroup.visible=!this.bichuGroup.visible},i.prototype.bisizeChoose=function(e){for(var t=0,i=7;i>=0;i--){var n=53.5*i+14;if(e.localY>=n){t=i;break}}var r=53.5*t+14+66,a=egret.Tween.get(this.bichuk,{loop:!1});a.to({y:r},300,egret.Ease.backOut),this.pensize=3+7*t,console.log(this.pensize)},i.prototype.gohome=function(){console.log("返回");var e=new gohomefn(gohomefn.DATE);this.dispatchEvent(e)},i.prototype.cleanAll=function(){for(var e=0;e<this.drawthings.length;e++){var t=this.drawthings[e][1];t.removeChildren()}},i.prototype.penListfn=function(){this.penList=new egret.Sprite,this.addChild(this.penList);for(var t=(e.config.stageW-1300)/2+this.safeAreaLeft,i=0;20>i;i++){var n=i+1,r=e.createBitmapByName("pen"+n+"_png");this.penList.addChild(r),r.touchEnabled=!0,r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseColor,this),r.width=62,r.height=e.autoHeight(r),r.anchorOffsetY=r.height,r.x=i*(r.width+3)+t,r.y=e.changeY(780),r.color=e.config.colorlist[i]}},i.prototype.chooseColor=function(t){this.color=t.currentTarget.color,this.penList.$children.forEach(function(t){t.y=e.changeY(780)}),t.currentTarget.y=e.changeY(765),this.sepan.graphics.clear(),this.sepan.graphics.lineStyle(4,0),this.sepan.graphics.beginFill(this.color),this.sepan.graphics.drawRoundRect(0,0,66,66,66),this.sepan.graphics.endFill(),wx.vibrateShort({type:"light"})},i.prototype.chooseimg=function(e){var t=e.currentTarget.id,i=e.currentTarget.graphics.minY-4,n=egret.Tween.get(this.choosekuang,{loop:!1});n.to({y:i},300,egret.Ease.backOut);for(var r in this.drawthings){var a=this.drawthings[r][0];a.touchEnabled=!1,a.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),a.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchbegin,this),a.removeEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this),a.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEnd,this)}for(var o=this.referline.$children,h=0;h<o.length;h++){var s=h+1;if(1==t||s==t-1){var c=o[h],d=egret.Tween.get(c,{loop:!1});d.to({alpha:.3},200,egret.Ease.backIn).to({alpha:1},200,egret.Ease.backIn).to({alpha:.3},200,egret.Ease.backIn).to({alpha:1},200,egret.Ease.backIn)}}var u=this.drawthings[t-1][0];this.drawthings[t-1][1];console.log(this.saveGroup.$children.length);var l=this.saveGroup.$children.length-2;1==t?this.saveGroup.setChildIndex(this.drawthings[0][1],l):this.saveGroup.setChildIndex(this.drawthings[0][1],0),u.touchEnabled=!0,u.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchbegin,this),u.addEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this),u.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEnd,this),wx.vibrateShort({type:"medium"})},i.prototype.touchbegin=function(e){var t=e.currentTarget;this.lastPoint=new egret.Point(e.localX+t.x,e.localY+t.y),t.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this)},i.prototype.drawInit=function(t,i){var n=new egret.Shape;n.graphics.beginFill(16777215),n.graphics.drawRoundRect(0,0,220+this.safeAreaLeft,e.config.stageH,60),n.graphics.endFill(),n.alpha=.6,n.x=-60,this.addChild(n);var r=new egret.Sprite,a=new egret.ScrollView;a.setContent(r),a.width=160+this.safeAreaLeft,a.height=e.changeY(600),a.x=0+this.safeAreaLeft+5,a.y=75,a.bounces=!1,a.verticalScrollPolicy="on",this.myscrollView=a,this.addChild(this.myscrollView);var o=e.createBitmapByName("run_jt_png");this.addChild(o),o.anchorOffsetX=o.width/2,o.x=80+this.safeAreaLeft+5,o.y=30;var h=e.createBitmapByName("run_jt_png");this.addChild(h),h.anchorOffsetX=h.width/2,h.anchorOffsetY=0,h.rotation=180,h.x=80+this.safeAreaLeft+5,h.y=e.config.stageH-30;for(var s=1;i>=s;s++){var c=15,d=150*(s-1)+4,u=130,l=new egret.Shape;l.graphics.beginFill(16774892),l.graphics.drawRoundRect(c,d,u,u,60),l.graphics.endFill(),r.addChild(l),l.id=s,l.touchEnabled=!0,l.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseimg,this);for(var g=1;i>=g;g++)if(1!=g){var p=e.createBitmapByName(t+"_line"+g+"_png");r.addChild(p),p.width>p.height?(p.width=114,p.height=e.autoHeight(p)):(p.height=114,p.width=e.autoWidth(p)),p.anchorOffsetX=p.width/2,p.anchorOffsetY=p.height/2,p.x=c+u/2,p.y=d+u/2,g!=s&&1!=s&&(p.alpha=.2)}if(i>4&&s==i){var f=new egret.Shape;f.graphics.beginFill(39168),f.graphics.drawRect(0,d+u,130,20),f.graphics.endFill(),f.alpha=0,r.addChild(f)}var v=new egret.Shape;v.graphics.beginFill(16777215),v.graphics.drawRect(100+this.safeAreaLeft,50,1360,e.changeY(650)),v.graphics.endFill(),v.id=s,v.alpha=0,v.touchEnabled=!1,this.saveGroup.addChild(v);
var w=e.createBitmapByName(t+"_zhe"+s+"_png");w.x=e.config.stageW/2-w.width/2+this.safeAreaLeft,w.y=e.config.stageH/2-w.height/2-40,this.saveGroup.addChild(w);var m=new egret.Sprite;this.saveGroup.addChild(m),m.mask=w;var _=[v,m];this.drawthings.push(_),1==s&&(v.touchEnabled=!0,v.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchbegin,this),v.addEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this),v.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEnd,this))}this.referline=new egret.Sprite,this.saveGroup.addChild(this.referline);for(var g=1;i>=g;g++)if(1!=g){var p=e.createBitmapByName(t+"_line"+g+"_png");this.referline.addChild(p),p.x=e.config.stageW/2-p.width/2+this.safeAreaLeft,p.y=e.config.stageH/2-p.height/2-40}var y=this.saveGroup.$children.length-2;this.saveGroup.setChildIndex(this.drawthings[0][1],y),this.myscrollView._content.height<this.myscrollView.height&&(o.alpha=h.alpha=.4),this.choosekuang=new egret.Shape,this.choosekuang.graphics.lineStyle(3,39168),this.choosekuang.graphics.drawRoundRect(15,4,130,130,60),this.choosekuang.graphics.endFill(),r.addChild(this.choosekuang),this.drawGroup=new egret.Sprite,this.addChild(this.drawGroup)},i.prototype.getdrawline=function(e){var t=new egret.Shape;return t.graphics.lineStyle(this.pensize,this.color),t.graphics.moveTo(this.lastPoint.x,this.lastPoint.y),t.graphics.lineTo(e.localX+e.currentTarget.x,e.localY+e.currentTarget.y),t},i.prototype.onMove=function(e){var t=e.currentTarget.id,i=this.getdrawline(e),n=this.drawthings[t-1][1];n.addChild(i),this.lastPoint.x=e.localX+e.currentTarget.x,this.lastPoint.y=e.localY+e.currentTarget.y},i.prototype.onEnd=function(e){this.lastPoint=null,e.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this);var t=e.currentTarget.id,i=this.drawthings[t-1][1];this.isIos&&this.repaint(i,t)},i.prototype.repaint=function(e,t){if(1==t){var i=this.drawthings,n=i[0][1],r=new egret.RenderTexture;r.drawToTexture(n);for(var a=0;a<i.length;a++)if(0!=a){var o=new egret.Bitmap(r),h=i[a][1];h.addChild(o)}return void n.removeChildren()}var r=new egret.RenderTexture;r.drawToTexture(e);var o=new egret.Bitmap(r);e.removeChildren(),e.addChild(o)},i}(egret.DisplayObjectContainer);e.colorpage=t,__reflect(t.prototype,"Game.colorpage",[])}(i||(i={})),window.Game=i},function(e,t){var i,i=window.Game;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.strokes=[],e._currentStroke={color:0,size:0,lines:[]},e.color=0,e.pensize=5,e._sketching=!1,e.drawLog=[],e._cursorPosition=function(e){return{x:e.localX,y:e.localY}},e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(i,t),i.prototype.onAddToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.gamebg()},i.prototype.gamebg=function(){this.drawbg=e.createBitmapByName("indexbg_png"),this.drawbg.touchEnabled=!0,this.addChild(this.drawbg),this.drawboxfn()},i.prototype.drawboxfn=function(){this.saveGroup=new egret.Sprite,this.addChild(this.saveGroup),this.drawbox=new egret.Shape,this.drawbox.graphics.beginFill(16777215),this.drawbox.graphics.drawRect(100,e.changeY(0),1360,e.changeY(650)),this.drawbox.graphics.endFill(),this.saveGroup.addChild(this.drawbox),this.drawbox.touchEnabled=!0,this.drawbox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.ontouchstart,this),this.drawbox.addEventListener(egret.TouchEvent.TOUCH_END,this.ontouchEnd,this),this.drawbox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.ontouchEnd,this),this.drawbox.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.ontouchEnd,this),this.drawbox.addEventListener(egret.TouchEvent.REMOVED_FROM_STAGE,this.ontouchEnd,this),this.drawlineGroup=new egret.Sprite,this.saveGroup.addChild(this.drawlineGroup);var t=e.createBitmapByName("hua_zhe_png");this.saveGroup.addChild(t),t.y=e.changeY(0),t.height=e.changeY(t.height),this.penListfn();var i=30,n=e.createBitmapByName("save_btn_png");this.addChild(n),n.width=.54*n.width,n.height=e.autoHeight(n),n.x=e.config.stageW-n.width-i,n.y=e.changeY(90),n.touchEnabled=!0,n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.savePhoto,this);var r=e.createBitmapByName("back_btn_png");this.addChild(r),r.width=.54*r.width,r.height=e.autoHeight(r),r.x=n.x,r.y=n.y+n.height+20,r.touchEnabled=!0,r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.drawback,this);var a=e.createBitmapByName("delete_btn_png");this.addChild(a),a.width=.54*a.width,a.height=e.autoHeight(a),a.x=n.x,a.y=r.y+r.height+20,a.touchEnabled=!0,a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.cleanAll,this);var o=e.createBitmapByName("pen_btn_png");this.addChild(o),o.width=.54*o.width,o.height=e.autoHeight(o),o.x=e.config.stageW-o.width-25-i,o.y=a.y+a.height+40,o.touchEnabled=!0,o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.bichufn,this),this.bichuGroup=new egret.Sprite,this.addChild(this.bichuGroup),this.bichuGroup.visible=!1;var h=e.createBitmapByName("bichu_png");this.bichuGroup.addChild(h),h.$anchorOffsetX=h.width,h.x=o.x-10,h.y=120,h.touchEnabled=!0,h.addEventListener(egret.TouchEvent.TOUCH_TAP,this.bisizeChoose,this),this.bichuk=e.createBitmapByName("bichuk_png"),this.bichuGroup.addChild(this.bichuk),this.bichuk.anchorOffsetX=this.bichuk.width,this.bichuk.x=h.x-30,this.bichuk.y=140;var s=e.createBitmapByName("home_btn_png");this.addChild(s),s.width=.54*s.width,s.height=e.autoHeight(s),s.x=n.x,s.y=o.y+o.height+40,s.touchEnabled=!0,s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.gohome,this)},i.prototype.savePhoto=function(){var t=this,i=new egret.RenderTexture;i.drawToTexture(this.saveGroup),this.setChildIndex(this.saveGroup,20),setTimeout(function(n){var r=canvas.toTempFilePathSync({destWidth:e.config.stageW,destHeight:e.config.stageH});t.setChildIndex(t.saveGroup,1);var a=new egret.Bitmap(i);a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,a.x=e.config.stageW/2,a.y=e.config.stageH/2,t.addChild(a);var o=egret.Tween.get(a,{loop:!1}),h=t;o.to({scaleX:.5,scaleY:.5},1e3).call(function(e){wx.saveImageToPhotosAlbum({filePath:r,success:function(e){wx.showToast({title:"成功保存到相册",icon:"success",duration:1500})},complete:function(e){setTimeout(function(e){var t=egret.Tween.get(a,{loop:!1});t.to({alpha:0},100).call(function(e){h.removeChild(a)})},1400)}})})},20)},i.prototype.gohome=function(){var e=new gohomefn(gohomefn.DATE);this.dispatchEvent(e)},i.prototype.bisizeChoose=function(e){for(var t=0,i=7;i>=0;i--){var n=53.5*i+14;if(e.localY>=n){t=i;break}}var r=53.5*t+14+126,a=egret.Tween.get(this.bichuk,{loop:!1});a.to({y:r},300,egret.Ease.backOut),this.pensize=3+5*t,console.log(this.pensize)},i.prototype.bichufn=function(){this.bichuGroup.visible=!this.bichuGroup.visible},i.prototype.penListfn=function(){this.penList=new egret.Sprite,this.addChild(this.penList);for(var t=(e.config.stageW-1300)/2,i=0;20>i;i++){var n=i+1,r=e.createBitmapByName("pen"+n+"_png");this.penList.addChild(r),r.touchEnabled=!0,r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseColor,this),r.width=62,r.height=e.autoHeight(r),r.anchorOffsetY=r.height,r.x=i*(r.width+3)+t,r.y=e.changeY(780),r.color=e.config.colorlist[i]}},i.prototype.chooseColor=function(t){this.color=t.currentTarget.color,this.penList.$children.forEach(function(t){t.y=e.changeY(780)}),t.currentTarget.y=e.changeY(765),wx.vibrateShort({type:"light"})},i.prototype.xiangpifn=function(){this.color=16777215,this.penList.$children.forEach(function(e){e.y=780})},i.prototype.ontouchstart=function(e){this._sketching||(this._sketching=!0,this.lastPoint=this._cursorPosition(e),this.drawbox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.ontouchmove,this))},i.prototype.drawfn=function(e,t,i,n){var r=new egret.Shape;r.graphics.lineStyle(i,n),r.graphics.moveTo(e.x,e.y),r.graphics.lineTo(t.x,t.y),r.name="Line"+this.strokes.length,this.drawlineGroup.addChild(r)},i.prototype.ontouchmove=function(e){var t=this._cursorPosition(e);this.drawfn(this.lastPoint,t,this.pensize,this.color),this.lastPoint.x=e.localX,this.lastPoint.y=e.localY},i.prototype.ontouchEnd=function(){this._sketching&&(this.strokes.push(this._currentStroke),this._sketching=!1),this.drawbg.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.ontouchmove,this),this.repaint(this.drawlineGroup)},i.prototype.drawback=function(){this.drawLog.pop(),this.drawlineGroup.removeChildren(),this.drawLog.length>0&&this.drawlineGroup.addChild(this.drawLog[this.drawLog.length-1])},i.prototype.cleanAll=function(){this.drawlineGroup.removeChildren(),this.drawLog=[]},i.prototype.repaint=function(e){var t=new egret.RenderTexture;t.drawToTexture(e);var i=new egret.Bitmap(t);this.drawLog.push(i),e.removeChildren(),e.addChild(i)},i}(egret.DisplayObjectContainer);e.drawpage=t,__reflect(t.prototype,"Game.drawpage",[])}(i||(i={})),window.Game=i},function(e,t){var i=function(e){function t(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);var r=e.call(this,t,i,n)||this;return r.num=0,r.data="",r}return __extends(t,e),t.DATE="选择物品",t}(egret.Event);window.choosefn=i,__reflect(i.prototype,"choosefn",[]);var n=function(e){function t(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);var r=e.call(this,t,i,n)||this;return r.num=0,r.data="",r}return __extends(t,e),t.DATE="返回首页",t}(egret.Event);window.gohomefn=n,__reflect(n.prototype,"gohomefn",[])},function(e,t){var i=function(){function e(){}return e.setDefaultShare=function(){console.log("set_default_share"),wx.showShareMenu({withShareTicket:!0,success:function(e){console.log("setting_success"),console.log(e)},fail:function(e){console.warn(e)}}),wx.onShareAppMessage(function(){return{title:Game.getShareTitle()||"",imageUrl:Game.getShareImg()||""}})},e.shareGame=function(e,t,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return e||(e="normalShare"),t||(t=Game.getShareTitle()),i||(i=Game.getShareImg()),[2,new Promise(function(e,n){wx.shareAppMessage({title:t,imageUrl:i,query:"",success:function(t){e(t),console.log("主动分享成功")},fail:function(t){e(null)}})})]})})},e}();window.WxShare=i,__reflect(i.prototype,"WxShare",[])}]);